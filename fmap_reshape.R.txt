#This is like reshape2::melt

fmap <- function(x){
  milista <- lapply(x[,4:ncol(x),drop=FALSE], c)
  milista2 <- lapply(milista, function(y) cbind(x[,1:3],y))
  milista3 <- list()
  for(n in names(milista2)){
    milista3[[n]] <- cbind(milista2[[n]],"SEMANA"=n)
  }
  return(
    data.frame(do.call(rbind,milista3), row.names=NULL) |> setNames(nm=c("canal","kpi","producto","valor","semana"))
  )
}